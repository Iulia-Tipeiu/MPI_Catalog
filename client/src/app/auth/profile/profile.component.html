<div class="profile-container">
  <mat-card>
    <h2>User Profile</h2>

    <!-- Static Info -->
    <p><strong>Username:</strong> {{ user.username }}</p>
    <p><strong>Email:</strong> {{ user.email }}</p>
    <p><strong>Role:</strong> {{ user.role }}</p>

    <!-- Profile Editable Form -->
    <form [formGroup]="profileForm">
      <mat-form-field appearance="fill">
        <mat-label>First Name</mat-label>
        <input matInput formControlName="first_name" [readonly]="!isEditing" />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Last Name</mat-label>
        <input matInput formControlName="last_name" [readonly]="!isEditing" />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Phone</mat-label>
        <input matInput formControlName="phone" [readonly]="!isEditing" />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Address</mat-label>
        <input matInput formControlName="address" [readonly]="!isEditing" />
      </mat-form-field>
    </form>

    <!-- Edit/Save Button -->
    <button mat-raised-button color="primary" (click)="toggleEdit()">
      {{ isEditing ? 'Save Changes' : 'Edit Profile' }}
    </button>

    <!-- Divider -->
    <hr />

    <!-- Change Password Section -->
    <div class="section-title">Change Password</div>
    <button mat-button color="warn" (click)="togglePasswordChange()">
      {{ isChangingPassword ? 'Cancel' : 'Change Password' }}
    </button>

    <form *ngIf="isChangingPassword" [formGroup]="passwordForm">
      <mat-form-field appearance="fill">
        <mat-label>Current Password</mat-label>
        <input matInput type="password" formControlName="currentPassword" />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>New Password</mat-label>
        <input matInput type="password" formControlName="newPassword" />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Confirm New Password</mat-label>
        <input matInput type="password" formControlName="confirmPassword" />
      </mat-form-field>

      <button mat-raised-button color="accent" (click)="submitPasswordChange()">
        Save Password
      </button>
    </form>
  </mat-card>
</div>
